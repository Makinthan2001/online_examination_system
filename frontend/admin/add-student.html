<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Add New Student</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 min-h-screen">
  <div class="flex min-h-screen">
    <!-- Sidebar (inline, not iframe) -->
    <nav class="sidebar bg-white border-r" aria-label="Main Navigation" style="width:220px; min-width:220px; height:100vh; display:flex; flex-direction:column;">
      <div class="sidebar-header font-bold text-2xl px-6 py-4 border-b">Online Exam</div>
      <ul class="sidebar-menu flex-1 px-0 py-4" style="list-style:none; margin:0;">
        <li tabindex="0" role="menuitem" aria-label="Dashboard" class="px-6 py-3 flex items-center gap-3 cursor-pointer hover:bg-indigo-100 rounded transition" onclick="location.href='admin-dashboard.html'">
          <svg viewBox="0 0 24 24" width="20" height="20" fill="none"><path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z" fill="#64748b"/></svg>
          <span>Dashboard</span>
        </li>
        <!-- <li tabindex="0" role="menuitem" aria-label="Add Question" class="px-6 py-3 flex items-center gap-3 cursor-pointer hover:bg-indigo-100 rounded transition" onclick="location.href='add-question.html'">
          <svg viewBox="0 0 24 24" width="20" height="20" fill="none"><path d="M12 4v16m8-8H4" stroke="#64748b" stroke-width="2"/></svg>
          <span>Add Question</span>
        </li> -->
        <li tabindex="0" role="menuitem" aria-label="Add Student" class="px-6 py-3 flex items-center gap-3 cursor-pointer hover:bg-indigo-100 rounded transition" onclick="location.href='add-student.html'">
          <svg viewBox="0 0 24 24" width="20" height="20" fill="none"><circle cx="12" cy="7" r="4" stroke="#64748b" stroke-width="2"/><path d="M5.5 21a6.5 6.5 0 0 1 13 0" stroke="#64748b" stroke-width="2"/></svg>
          <span>Add Student</span>
        </li>
        <li tabindex="0" role="menuitem" aria-label="Manage Students" class="px-6 py-3 flex items-center gap-3 cursor-pointer hover:bg-indigo-100 rounded transition" onclick="location.href='manage-students.html'">
          <svg viewBox="0 0 24 24" width="20" height="20" fill="none"><path d="M4 4h16v2H4zm0 4h10v2H4zm0 4h16v2H4zm0 4h10v2H4z" fill="#64748b"/></svg>
          <span>Manage Students</span>
        </li>
        <li tabindex="0" role="menuitem" aria-label="Create Exam" class="px-6 py-3 flex items-center gap-3 cursor-pointer hover:bg-indigo-100 rounded transition" onclick="location.href='create-exam.html'">
          <svg viewBox="0 0 24 24" width="20" height="20" fill="none"><path d="M19 3H5a2 2 0 0 0-2 2v14l4-4h12a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2z" stroke="#64748b" stroke-width="2"/></svg>
          <span>Create Exam</span>
        </li>
        <li tabindex="0" role="menuitem" aria-label="Manage Exams" class="px-6 py-3 flex items-center gap-3 cursor-pointer hover:bg-indigo-100 rounded transition" onclick="location.href='manage-exams.html'">
          <svg viewBox="0 0 24 24" width="20" height="20" fill="none"><path d="M5 13l4 4L19 7" stroke="#64748b" stroke-width="2"/></svg>
          <span>Manage Exams</span>
        </li>
        <li tabindex="0" role="menuitem" aria-label="Result" class="px-6 py-3 flex items-center gap-3 cursor-pointer hover:bg-indigo-100 rounded transition" onclick="location.href='result.html'">
          <svg viewBox="0 0 24 24" width="20" height="20" fill="none"><path d="M3 17a4 4 0 0 0 4 4h10a4 4 0 0 0 4-4V7a4 4 0 0 0-4-4H7a4 4 0 0 0-4 4v10z" stroke="#64748b" stroke-width="2"/><path d="M8 11h8M8 15h6" stroke="#64748b" stroke-width="2"/></svg>
          <span>Result</span>
        </li>
      </ul>
      <div class="px-6 pb-6 mt-auto">
        <button onclick="logout()" class="w-full text-sm bg-red-100 text-red-600 px-3 py-2 rounded">Logout</button>
      </div>
    </nav>

    <!-- Main Content -->
    <div class="flex-1">
      <!-- Navbar Placeholder -->
      <nav class="bg-white shadow p-4 mb-6">
        <div class="container mx-auto text-xl font-bold">Add Student</div>
      </nav>
      <div class="container mx-auto px-4 py-8">
    
    <!-- Back Button -->
    <button onclick="window.location.href='students.html'" class="text-blue-600 flex items-center mb-6 hover:underline">
      ← Back to Students
    </button>

    <!-- Card -->
    <div class="max-w-2xl mx-auto bg-white p-6 rounded-lg shadow">
      <h2 class="text-xl font-semibold flex items-center mb-6">
        <span class="mr-2">➕</span> Add New Student
      </h2>

      <form id="studentForm" class="space-y-6">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label for="username" class="block text-sm font-medium">Username *</label>
            <input id="username" required type="text" placeholder="Enter username"
              class="w-full mt-1 p-2 border rounded-md" />
            <p class="text-xs text-gray-500 mt-1">Must be unique and will be used for login</p>
          </div>

          <div>
            <label for="password" class="block text-sm font-medium">Password *</label>
            <input id="password" required type="password" placeholder="Enter password"
              class="w-full mt-1 p-2 border rounded-md" />
            <p class="text-xs text-gray-500 mt-1">Minimum 4 characters recommended</p>
          </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label for="name" class="block text-sm font-medium">Full Name</label>
            <input id="name" type="text" placeholder="Enter full name"
              class="w-full mt-1 p-2 border rounded-md" />
          </div>

          <div>
            <label for="age" class="block text-sm font-medium">Age</label>
            <input id="age" type="number" min="1" max="120" placeholder="Enter age"
              class="w-full mt-1 p-2 border rounded-md" />
          </div>
        </div>

        <div class="flex justify-end space-x-4">
          <button type="button" onclick="window.location.href='students.html'" class="px-4 py-2 border rounded-md">
            Cancel
          </button>
          <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded-md">
            Add Student
          </button>
        </div>
      </form>
    </div>
  </div>

  <script>
    const form = document.getElementById('studentForm');

    form.addEventListener('submit', function (e) {
      e.preventDefault();

      const username = document.getElementById('username').value.trim();
      const password = document.getElementById('password').value.trim();
      const name = document.getElementById('name').value.trim();
      const age = document.getElementById('age').value;

      const students = JSON.parse(localStorage.getItem('users') || '[]');

      // Check if username exists
      if (students.some(u => u.username === username)) {
        alert("Username already exists. Please choose another.");
        return;
      }

      // Age validation
      const ageNum = parseInt(age);
      if (age && (ageNum < 1 || ageNum > 120)) {
        alert("Please enter a valid age between 1 and 120.");
        return;
      }

      const newStudent = {
        username,
        password,
        name,
        age: age ? ageNum : null,
        role: 'student'
      };

      students.push(newStudent);
      localStorage.setItem('users', JSON.stringify(students));
      alert("Student added successfully!");
      window.location.href = 'students.html';
    });
  </script>
</body>
</html>
